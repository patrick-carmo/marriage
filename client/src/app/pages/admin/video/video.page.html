<app-header></app-header>
<ion-content [fullscreen]="true">
  <main class="container-section">
    <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
      <ion-refresher-content pullingIcon="chevron-down-circle-outline" pullingText="Puxe para atualizar" refreshingSpinner="crescent" refreshingText="Atualizando...">
      </ion-refresher-content>
    </ion-refresher>

    <ion-list>
      <ion-item *ngFor="let video of videos">
        <ion-card>
          <ion-card-header>
            <ion-avatar>
              <img [src]="video.user.picture || 'https://ionicframework.com/docs/img/demos/avatar.svg'" />
            </ion-avatar>
            <div>
              <ion-card-title color="secondary">{{ video.user.name }}</ion-card-title>
              <ion-card-subtitle>{{ video.user.email }}</ion-card-subtitle>
            </div>
          </ion-card-header>
          <ion-card-content>
            <iframe class="iframe" [src]="video.url | safe: 'resourceUrl'" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
            <p>
              {{ video.created_at | date: 'dd/MM/yyyy HH:mm:ss' : 'UTC-6' }}</p>
          </ion-card-content>
        </ion-card>
      </ion-item>
    </ion-list>

    <ion-infinite-scroll *ngIf="!infiniteDisabled" (ionInfinite)="onIonInfinite($event)">
      <ion-infinite-scroll-content loadingText="Carregando..." loadingSpinner="crescent"></ion-infinite-scroll-content>
    </ion-infinite-scroll>
  </main>
</ion-content>